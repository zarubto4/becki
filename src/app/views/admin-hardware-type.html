<bk-layout-main

     [tabMenu]="byzance-admin"
     [title]="'main_title'|bkTranslate:this"
     [subtitle]="'main_subtitle'|bkTranslate:this">

    <div *ngIf="hardwareTypes && processors && producers" class="row">
        <div class="col-md-12">
            <div class="portlet portlet light bordered">
                <div class="portlet-title">
                    <div class="becki-caption">
                        <span class="font-blue-dark">
                            <i class="fa fa-fw fa-server"></i>
                              {{'title'|bkTranslate:this}}
                        </span>
                    </div>
                    <div class="becki-actions">
                        <div *ngIf="tab == 'hardware_list'">
                            <button title="{{'label_create_manually_hardware'|bkTranslate:this}}" class="btn btn-icon-only green"
                                    [disabled]="false"
                                    (click)="onCreateHardwareClick()">
                                <i class="fa fa-plus-circle"></i>
                            </button>
                            <button title="{{'label_add_new_with_full_flow'|bkTranslate:this}}" class="btn btn-icon-only green"
                                    [disabled]="false"
                                    [routerLink]="['/admin/garfield']">
                                <i class="fa fa-plus-circle"></i>
                                <i class="fa fa-fire"></i>
                            </button>
                            <button title="{{'label_add_new_with_full_flow'|bkTranslate:this}}" class="btn btn-icon-only yellow"
                                    [disabled]="false"
                                    (click)="onHardwareSynchronize()">
                                <i class="fa fa-plus-circle"></i>
                                <i class="fa fa-refresh"></i>
                            </button>
                        </div>
                        <div *ngIf="tab == 'hardware_type' && hardwareTypes && hardwareTypes.length">
                            <button title="{{'label_create_type_of_board'|bkTranslate:this}}" class="btn btn-icon-only green"
                                    [disabled]="false"
                                    (click)="onCreateHardwareTypeClick()">
                                <i class="fa fa-plus-circle"></i>
                            </button>
                        </div>
                        <div *ngIf="tab == 'producers' && producers && producers.length">
                            <button title="{{'label_create_type_of_board'|bkTranslate:this}}" class="btn btn-icon-only green"
                                    [disabled]="false"
                                    (click)="onCreateProducerClick()">
                                <i class="fa fa-plus-circle"></i>
                            </button>
                        </div>
                        <div *ngIf="tab == 'processor' && processors && processors.length">
                            <button title="{{'label_create_type_of_board'|bkTranslate:this}}" class="btn btn-icon-only green"
                                    [disabled]="false"
                                    (click)="onCreateProcessorClick()">
                                <i class="fa fa-plus-circle"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="portlet-title tabbable-line">
                    <ul class="nav nav-tabs pull-left margin-left-15">
                        <li [class.active]="tab == 'hardware_list'">
                            <a class="cursor-pointer" (click)="onToggleTab('hardware_list')">{{'tab_hardware_list'|bkTranslate:this}}</a>
                        </li>
                        <li [class.active]="tab == 'hardware_type'">
                            <a class="cursor-pointer" (click)="onToggleTab('hardware_type')">{{'tab_hardware_type'|bkTranslate:this}}</a>
                        </li>
                        <li [class.active]="tab == 'processor'">
                            <a class="cursor-pointer" (click)="onToggleTab('processor')">{{'tab_processor'|bkTranslate:this}}</a>
                        </li>
                        <li [class.active]="tab == 'producers'">
                            <a class="cursor-pointer" (click)="onToggleTab('producers')">{{'tab_producers'|bkTranslate:this}}</a>
                        </li>
                    </ul>
                </div>

                <!-- Device List -->
                <div *ngIf="tab == 'hardware_list'">
                    <!-- Filter !-->
                    <div *ngIf="boardsFiler && boardsFiler.content"  class="becki-actions">

                    </div>

                    <div *ngIf="(boardsFiler && boardsFiler.content.length)" class="table-scrollable">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="no-wrap">{{'label_name'|bkTranslate:this}}</th>
                                <th class="no-wrap">{{'label_table_id'|bkTranslate:this}}</th>
                                <th class="no-wrap">{{'label_description'|bkTranslate:this}}</th>
                                <th class="no-wrap">{{'label_hash'|bkTranslate:this}}</th>
                                <th class="no-wrap"><strong class="font-color-hardware">Hardware</strong>{{'label_table_type'|bkTranslate:this}}</th>
                                <th class="no-wrap">{{'label_table_status'|bkTranslate:this}}</th>
                                <th class="text-right no-wrap">{{'label_actions'|bkTranslate:this}} &nbsp;&nbsp;</th>
                            </tr>
                            </thead>

                            <tbody>
                            <tr *ngFor="let device of boardsFiler.content">
                                <template [ngIf]="device">
                                <td class="vert-align no-wrap">
                                    <span class="icon-hint-wraper red" *ngIf="device.alert_list && device.alert_list.length > 0">
                                        <i class="fa fa-fw fa-exclamation-triangle font-red-flamingo"></i>
                                        <div class="hint-fixed">
                                            <span class="hint right">
                                                <div *ngFor="let alert of device.alert_list" class="no-wrap">{{alert|bkTranslateTable:this:'device_alerts'}}</div>
                                            </span>
                                        </div>
                                    </span>
                                    <a (click)="onDeviceClick(device)" class="no-wrap"><strong>{{device.name?device.name:device.id}}</strong></a>
                                </td>
                                <td class="vert-align no-wrap">{{device.id}}</td>
                                <td class="vert-align no-wrap">{{device.description}}</td>
                                <td class="vert-align no-wrap">{{device.hash_for_adding}}</td>
                                <td class="vert-align no-wrap"><a (click)="onHardwareTypeClick(device.type_of_board_id)">{{device.type_of_board_name}}</a></td>
                                <td class="vert-align no-wrap">
                                    <span *ngIf="device.online_state == 'online'" class="font-green-jungle bold">{{device.online_state|bkTranslateTable:this:'online_state'}}</span>
                                    <span *ngIf="device.online_state == 'offline'" class="font-red bold">{{device.online_state|bkTranslateTable:this:'online_state'}}</span>
                                    <span *ngIf="device.online_state == 'synchronization_in_progress'" class="font-grey-mint bold"><i class="fa fa-spinner fa-spin"></i></span>
                                    <span *ngIf="device.online_state == 'not_yet_first_connected'" class="font-grey-mint bold">{{device.online_state|bkTranslateTable:this:'online_state'}}</span>
                                    <span *ngIf="device.online_state == 'unknown_lost_connection_with_server'" class="font-grey-mint bold">{{device.online_state|bkTranslateTable:this:'online_state'}}</span>
                                </td>
                                <td class="vert-align no-wrap">

                                    <style type="text/css">
                                        table tr button { opacity:0.05;}
                                        table tr:hover button { opacity:1 }
                                    </style>

                                    <button title="{{'label_print_stickers'|bkTranslate:this}}" class="btn btn-icon-only yellow" (click)="onPrintLabelHardwareClick(device)">
                                        <i class="fa fa-print"></i>
                                    </button>
                                    <button title="{{'label_device_properties'|bkTranslate:this}}" class="btn btn-icon-only green" [disabled]="!device.update_permission" (click)="onEditHardwareClick(device)">
                                        <i class="fa fa-cog"></i>
                                    </button>
                                    <button title="{{'label_remove_device'|bkTranslate:this}}" class="btn btn-icon-only red" [disabled]="!device.delete_permission" (click)="onRemoveHardwareClick(device)">
                                        <i class="fa fa-trash"></i>
                                    </button>
                                </td>
                            </template>
                            </tr>
                            </tbody>
                        </table>
                        <bk-filter-page-component [from]="boardsFiler.from" [to]="boardsFiler.to" [total]="boardsFiler.total"  [totalPages]="boardsFiler.pages" (onSelect)="selectedFilterPageHardware($event)"></bk-filter-page-component>
                    </div>
                    <h3 *ngIf="!boardsFiler" class="text-center">{{'label_loading'|bkTranslate:this}}</h3>
                    <div *ngIf="boardsFiler && boardsFiler.content.length == 0" class="list-no-items">
                        <p class="list-no-items__main-label">{{'label_no_boards'|bkTranslate:this}}</p>
                        <p class="list-no-items__sub-label">{{'label_no_boards_comment'|bkTranslate:this}} </p>
                    </div>
                </div>


                <!-- Hardware Types -->
                <div *ngIf="tab == 'hardware_type'">
                    <div *ngIf="(hardwareTypes && hardwareTypes.length)" class="table-scrollable">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>{{'label_name'|bkTranslate:this}}</th>
                                    <th>{{'label_target_name'|bkTranslate:this}}</th>
                                    <th>{{'label_bootloader'|bkTranslate:this}}</th>
                                    <th>{{'label_default_firmware'|bkTranslate:this}}</th>
                                    <th>{{'label_test_firmware'|bkTranslate:this}}</th>
                                    <th>{{'label_producer'|bkTranslate:this}}</th>
                                    <th>{{'label_processor'|bkTranslate:this}}</th>
                                    <th class="text-right">{{'label_actions'|bkTranslate:this}} &nbsp;&nbsp;</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let hardwareType of hardwareTypes">
                                    <td class="vert-align no-wrap">
                                        <a (click)="onHardwareTypeClick(hardwareType.id)" class="no-wrap"><strong>{{hardwareType.name}}</strong></a>
                                    </td>
                                    <td class="vert-align no-wrap">{{hardwareType.compiler_target_name}}</td>
                                    <td class="vert-align no-wrap">
                                        <span *ngIf="hardwareType.main_boot_loader" class="font-green-jungle bold">{{hardwareType.main_boot_loader.name}}</span>
                                        <span *ngIf="!hardwareType.main_boot_loader" class="font-red-flamingo bold">Missing!</span>
                                    </td>
                                    <td class="vert-align no-wrap">
                                        <span *ngIf="hardwareType.main_c_program.program_versions.length >0" class="font-green-jungle bold">{{hardwareType.main_c_program.program_versions[0].version_name}}</span>
                                        <span *ngIf="hardwareType.main_c_program.program_versions.length == 0" class="font-red-flamingo bold">Missing!</span>
                                    </td>
                                    <td class="vert-align no-wrap">
                                        <span *ngIf="hardwareType.main_test_c_program.program_versions.length > 0" class="font-green-jungle bold">{{hardwareType.main_test_c_program.program_versions[0].version_name}}</span>
                                        <span *ngIf="hardwareType.main_test_c_program.program_versions.length == 0" class="font-red-flamingo bold">Missing!</span>
                                    </td>
                                    <td class="vert-align no-wrap">
                                        <a (click)="onProducerClick(hardwareType.producer_id)" class="no-wrap"><strong>{{hardwareType.producer_name}}</strong></a>
                                    </td>
                                    <td class="vert-align no-wrap">
                                        {{hardwareType.processor_name}}
                                    </td>

                                    <td class="vert-align text-right no-wrap">
                                        <style type="text/css">
                                            table tr button { opacity:0.05;}
                                            table tr:hover button { opacity:1 }
                                        </style>
                                        <button title="{{'label_type_of_board_properties'|bkTranslate:this}}" class="btn btn-icon-only green" [disabled]="!hardwareType.update_permission" (click)="onHardwareTypeEditClick(hardwareType)">
                                            <i class="fa fa-cog"></i>
                                        </button>
                                        <button title="{{'label_type_of_board_remove'|bkTranslate:this}}" class="btn btn-icon-only red" [disabled]="!hardwareType.delete_permission" (click)="onHardwareTypeDeleteClick(hardwareType)">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <h3 *ngIf="!hardwareTypes" class="text-center">{{'label_loading'|bkTranslate:this}}</h3>
                    <div *ngIf="hardwareTypes && hardwareTypes.length == 0" class="list-no-items">
                        <p class="list-no-items__main-label">{{'label_no_type_of_boards'|bkTranslate:this}}</p>
                        <p class="list-no-items__sub-label">{{'label_no_type_of_boards_comment'|bkTranslate:this}} </p>
                        <p>
                            <button class="btn blue" (click)="onCreateHardwareTypeClick()">
                                <i class="fa fa-plus-circle"></i> {{'btn_create'|bkTranslate:this}}
                            </button>
                        </p>
                    </div>
                </div>


                <!-- Producers-->
                <div *ngIf="tab == 'producers'">
                    <div *ngIf="(producers && producers.length)" class="table-scrollable">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col col-lg-3">{{'label_name'|bkTranslate:this}}</th>
                                <th class="col col-lg-5">{{'label_description'|bkTranslate:this}}</th>
                                <th class="col col-lg-1 text-right no-wrap">{{'label_actions'|bkTranslate:this}} &nbsp;&nbsp;</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let producer of producers">
                                <td class="vert-align no-wrap">
                                    <a (click)="onProducerClick(producer.id)" class="no-wrap"><strong>{{producer.name}}</strong></a>
                                </td>
                                <td class="vert-align no-wrap">
                                    {{producer.description}}
                                </td>
                                <td class="vert-align text-right no-wrap">
                                    <style type="text/css">
                                        table tr button { opacity:0.05;}
                                        table tr:hover button { opacity:1 }
                                    </style>
                                    <button title="{{'label_producer_properties'|bkTranslate:this}}" class="btn btn-icon-only green" [disabled]="!producer.update_permission" (click)="onProducerEditClick(producer)">
                                        <i class="fa fa-cog"></i>
                                    </button>
                                    <button title="{{'label_producer_remove'|bkTranslate:this}}" class="btn btn-icon-only red" [disabled]="!producer.delete_permission" (click)="onProducerDeleteClick(producer)">
                                        <i class="fa fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <h3 *ngIf="!producers" class="text-center">{{'label_loading'|bkTranslate:this}}</h3>
                    <div *ngIf="producers && producers.length == 0" class="list-no-items">
                        <p class="list-no-items__main-label">{{'label_no_producer'|bkTranslate:this}}</p>
                        <p class="list-no-items__sub-label">{{'label_no_producer_comment'|bkTranslate:this}} </p>
                        <p>
                            <button class="btn blue" (click)="onCreateProducerClick()">
                                <i class="fa fa-plus-circle"></i> {{'btn_create'|bkTranslate:this}}
                            </button>
                        </p>
                    </div>
                </div>


                <!-- Processor -->
                <div *ngIf="tab == 'processor'">
                    <div *ngIf="(processors && processors.length)" class="table-scrollable">
                        <table class="table table-hover">
                            <thead>
                            <tr>
                                <th class="col col-lg-3">{{'label_name'|bkTranslate:this}}</th>
                                <th class="col col-lg-6">{{'label_description'|bkTranslate:this}}</th>
                                <th class="col col-lg-2">{{'label_speed'|bkTranslate:this}}</th>
                                <th class="col col-lg-1 text-right no-wrap">{{'label_actions'|bkTranslate:this}} &nbsp;&nbsp;</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let processor of processors">
                                <td class="vert-align no-wrap">
                                    <strong>{{processor.processor_name}}</strong>
                                </td>
                                <td class="vert-align no-wrap">
                                    {{processor.processor_code}}
                                </td>
                                <td class="vert-align no-wrap">
                                    {{processor.speed}}
                                </td>
                                <td class="vert-align text-right no-wrap">
                                    <style type="text/css">
                                        table tr button { opacity:0.05;}
                                        table tr:hover button { opacity:1 }
                                    </style>
                                    <button title="{{'label_processor_properties'|bkTranslate:this}}" class="btn btn-icon-only green" [disabled]="!processor.update_permission" (click)="onProcessorEditClick(processor)">
                                        <i class="fa fa-cog"></i>
                                    </button>
                                    <button title="{{'label_processor_remove'|bkTranslate:this}}" class="btn btn-icon-only red" [disabled]="!processor.delete_permission" (click)="onProcessorDeleteClick(processor)">
                                        <i class="fa fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                    <h3 *ngIf="!processors" class="text-center">{{'label_loading'|bkTranslate:this}}</h3>
                    <div *ngIf="processors && processors.length == 0" class="list-no-items">
                        <p class="list-no-items__main-label">{{'label_no_processor'|bkTranslate:this}}</p>
                        <p class="list-no-items__sub-label">{{'label_no_processor_comment'|bkTranslate:this}} </p>
                        <p>
                            <button class="btn blue" (click)="onCreateProcessorClick()">
                                <i class="fa fa-plus-circle"></i> {{'btn_create'|bkTranslate:this}}
                            </button>
                        </p>
                    </div>
                </div>


            </div>
        </div>
    </div>

</bk-layout-main>
