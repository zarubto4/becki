<bk-layout-main
    [tabMenu]="'byzance-admin'"
    [title]="'main_title'|bkTranslate:this"
    [subtitle]="'main_subtitle'|bkTranslate:this">

    <!-- Portlet - Basic Title of Panel with Buttons on right side -- START -->
    <bk-portlet-title
        [title_name]="'title'|bkTranslate:this"
        [icon]="'fa-microchip'"
        (onClick)="onPortletClick($event)"
        [btns]="[
                      {
                          condition: (tab == 'hardware_list'),
                          btn_label_for_person: ('btn_label_create_manually_hardware'|bkTranslate:this),
                          icon: 'fa-plus-circle',
                          colorType: 'EDIT',
                          permission: true,
                          btn_tag: 'add_hardware'
                      },
                       {
                          condition: (tab == 'hardware_list'),
                          btn_label_for_person: ('btn_label_hardware_hash'|bkTranslate:this),
                          icon: 'fa-plus-circle',
                          colorType: 'DEACTIVE',
                          permission: true,
                          btn_tag: 'find_hardware_hash'
                      },
                      {
                          condition: (tab == 'hardware_list'),
                          btn_label_for_person: ('btn_label_add_new_with_full_flow'|bkTranslate:this),
                          icon: 'fa-plus-circle',
                          colorType: 'CREATE',
                          permission: true,
                          btn_tag: 'register_new_hardware'
                      },
                      {
                          condition: (tab == 'hardware_type' && hardwareTypes && hardwareTypes.length > 0 ),
                          btn_label_for_person: ('btn_label_create_type_of_board'|bkTranslate:this),
                          icon: 'fa-plus-circle',
                          colorType: 'ADD',
                          permission: true,
                          btn_tag: 'new_hardware_type'
                      },
                      {
                          condition: (tab == 'producers' && producers && producers.length > 0 ),
                          btn_label_for_person: ('btn_label_create_producer'|bkTranslate:this),
                          icon: 'fa-plus-circle',
                          colorType: 'ADD',
                          permission: true,
                          btn_tag: 'add_producer'
                      },
                      {
                          condition: (tab == 'processor' && processors && processors.length > 0),
                          btn_label_for_person: ('btn_label_create_processor'|bkTranslate:this),
                          icon: 'fa-plus-circle',
                          colorType: 'ADD',
                          permission: true,
                          btn_tag: 'add_processor'
                      }
                    ]"
        (onTabClick)="onToggleTab($event)"
        [tab_selected_name]="tab"
        [tabBtns]="[
                        {
                            tab_name: 'hardware_list',
                            condition: (true),
                            tab_color: 'HARDWARE',
                            tab_label: ('tab_hardware_list'|bkTranslate:this)
                        },
                        {
                            tab_name: 'hardware_type',
                            condition: (true),
                            tab_color: 'HARDWARE',
                            tab_label: ('tab_hardware_type'|bkTranslate:this)
                        },
                        {
                            tab_name: 'processor',
                            condition: (true),
                            tab_color: 'HARDWARE',
                            tab_label: ('tab_processor'|bkTranslate:this)
                        },
                        {
                            tab_name: 'producers',
                            condition: (true),
                            tab_color: 'HARDWARE',
                            tab_label: ('tab_producers'|bkTranslate:this)
                        }
                    ]"
    >
    </bk-portlet-title>
    <!-- Portlet - Basic Title of Panel with Buttons on right side --- END -->


    <div class="portlet-body">

        <!-- Device List -->
        <div *ngIf="tab == 'hardware_list'">

            <bk-filter-component *ngIf="formFilterGroup"
                                 [closed]="false"
                                 [showFilterHead]="true"
                                 (onEnterHit)="onFilterHardware()"
                                 [filter_parameters]="[
                                        {
                                            type: 'FIND_BY_TEXT',
                                            content: {
                                                key: 'alias',
                                                label: 'Alias',
                                                form: formFilterGroup,
                                                showLabel: true
                                            }
                                        },
                                        {
                                            type: 'FIND_BY_TEXT',
                                            content: {
                                                key: 'id',
                                                label: 'Device ID (Part\'s not supported)',
                                                form: formFilterGroup,
                                                showLabel: true
                                            }
                                        },
                                        {
                                            type: 'FIND_BY_TEXT',
                                            content: {
                                                key: 'full_id',
                                                label: 'Full ID',
                                                form: formFilterGroup,
                                                showLabel: true
                                            }
                                        },
                                        {
                                            type: 'FIND_BY_TEXT',
                                            content: {
                                                key: 'description',
                                                label: 'Something in Description',
                                                form: formFilterGroup,
                                                showLabel: true
                                            }
                                        }
                                    ]"
            ></bk-filter-component>

            <div *ngIf="(devicesFilter && devicesFilter.content.length)">
                <table class="table table-hover table-light table-scrollable table-scrollable-borderless">
                    <thead>
                        <tr>
                            <th class="" [innerHTML]="'label_name'|bkTranslate:this"></th>
                            <th class="" [innerHTML]="'label_table_id'|bkTranslate:this"></th>
                            <th class="" [innerHTML]="'label_table_full_id'|bkTranslate:this"></th>
                            <th class="" [innerHTML]="'label_project'|bkTranslate:this"></th>
                            <th class="" [innerHTML]="'label_table_type'|bkTranslate:this"></th>
                            <th class="" [innerHTML]="'label_table_status'|bkTranslate:this"></th>
                            <th class="text-center" [innerHTML]="'table_actions'|bkTranslate:this"></th>
                        </tr>
                    </thead>
                    <tbody class="hide-bk-drob-down-button">
                        <tr *ngFor="let device of devicesFilter.content">
                            <ng-template [ngIf]="device">
                                <td class="vert-align no-wrap">
                                            <span class="icon-hint-wraper red"
                                                  *ngIf="device.alert_list && device.alert_list.length > 0">
                                                <i class="fa fa-fw fa-exclamation-triangle font-red-flamingo"></i>
                                                <div class="hint-fixed">
                                                    <span class="hint right">
                                                        <div *ngFor="let alert of device.alert_list" class="no-wrap">{{alert|bkTranslateTable:this:'device_alerts'}}</div>
                                                    </span>
                                                </div>
                                            </span>
                                    <a (click)="onDeviceClick_Admin(device.id)" class="no-wrap"><strong>{{device.name?device.name:device.id}}</strong></a>
                                </td>
                                <td class="vert-align breakable">{{device.id}}</td>
                                <td class="vert-align breakable">{{device.full_id}}</td>
                                <td class="vert-align no-wrap">
                                    <a *ngIf="device.project" (click)="onProjectClick(device.project.id)">{{device.project.name}}</a>
                                    <span *ngIf="!device.project">Not in Project</span>
                                </td>
                                <td class="vert-align no-wrap">
                                    <a (click)="onHardwareTypeClick(device.hardware_type.id)">{{device.hardware_type.name}}</a>
                                </td>
                                <td class="vert-align no-wrap">
                                    <bk-online-state [online_state]="device.online_state"></bk-online-state>
                                </td>
                                <td class="action-btn-col">

                                    <bk-drob-down-button
                                        [btns_group_name]="('label_Project_Properties'|bkTranslate:this)"
                                        [btns]="[
                                                {
                                                    condition: true,
                                                    btn_label_for_person: ('label_print_stickers'|bkTranslate:this),
                                                    btn_tag: 'print_device',
                                                    icon: 'fa-print',
                                                    colorType: 'CREATE',
                                                    permission: (device.update_permission)
                                                },
                                                {
                                                    condition: true,
                                                    btn_label_for_person: ('label_device_properties'|bkTranslate:this),
                                                    btn_tag: 'edit_device',
                                                    icon: 'fa-cog',
                                                    colorType: 'EDIT',
                                                    permission: (device.update_permission)
                                                },
                                                {
                                                    condition: true,
                                                    btn_label_for_person: ('label_remove_device'|bkTranslate:this),
                                                    btn_tag: 'remove_device',
                                                    icon: 'fa-trash',
                                                    colorType: 'REMOVE',
                                                    permission: (device.delete_permission)
                                                }
                                            ]"
                                        (onValueChanged)="onDrobDownEmiter($event, device)"
                                    >
                                    </bk-drob-down-button>
                                </td>
                            </ng-template>
                        </tr>
                    </tbody>
                </table>
                <bk-filter-page-component [from]="devicesFilter.from" [to]="devicesFilter.to" [total]="devicesFilter.total"
                                          [totalPages]="devicesFilter.pages"
                                          (onSelect)="onFilterHardware($event)"></bk-filter-page-component>
            </div>

            <!-- Temporary page content if content is being loaded or if there is no content -- START -->
            <bk-nothing-to-show [condition_loading]="(devicesFilter == null)"
                                [condition_empty]="(devicesFilter != null && devicesFilter.content.length == 0)"
                                [main_message_link]="'label_no_boards'|bkTranslate:this"
                                [main_message_comment_link]="'label_no_boards_comment'|bkTranslate:this"
                                [show_button]="false">
            </bk-nothing-to-show>
            <!-- Temporary page content if content is being loaded or if there is no content -- END -->

        </div>

        <!-- Hardware Types -->
        <div *ngIf="tab == 'hardware_type'">
            <div *ngIf="(hardwareTypes && hardwareTypes.length)">
                <table class="table table-hover table-light   table-scrollable table-scrollable-borderless">
                    <thead>
                    <tr>
                        <th>{{'label_name'|bkTranslate:this}}</th>
                        <th>{{'label_target_name'|bkTranslate:this}}</th>
                        <th>{{'label_bootloader'|bkTranslate:this}}</th>
                        <th>{{'label_default_firmware'|bkTranslate:this}}</th>
                        <th>{{'label_test_firmware'|bkTranslate:this}}</th>
                        <th>{{'label_producer'|bkTranslate:this}}</th>
                        <th>{{'label_processor'|bkTranslate:this}}</th>
                        <th class="text-center">{{'table_actions'|bkTranslate:this}}</th>
                    </tr>
                    </thead>
                    <tbody class="hide-bk-drob-down-button">
                    <tr *ngFor="let hardwareType of hardwareTypes">
                        <td class="vert-align no-wrap">
                            <a (click)="onHardwareTypeClick(hardwareType.id)" class="no-wrap"><strong>{{hardwareType.name}}</strong></a>
                        </td>
                        <td class="vert-align no-wrap">{{hardwareType.compiler_target_name}}</td>
                        <td class="vert-align no-wrap">
                            <span *ngIf="hardwareType.main_boot_loader" class="font-green-jungle bold">{{hardwareType.main_boot_loader.name}}</span>
                            <span *ngIf="!hardwareType.main_boot_loader" class="font-red-flamingo bold">Missing!</span>
                        </td>
                        <td class="vert-align no-wrap">
                            <span *ngIf="hardwareType.main_c_program.default_version" class="font-green-jungle bold">{{hardwareType.main_c_program.default_version.name}}</span>
                            <span *ngIf="!hardwareType.main_c_program.default_version" class="font-red-flamingo bold">Missing!</span>
                        </td>
                        <td class="vert-align no-wrap">
                            <span *ngIf="hardwareType.main_test_c_program.default_version"
                                  class="font-green-jungle bold">{{hardwareType.main_test_c_program.default_version.name}}</span>
                            <span *ngIf="!hardwareType.main_test_c_program.default_version"
                                  class="font-red-flamingo bold">Missing!</span>
                        </td>
                        <td class="vert-align no-wrap">
                            <a (click)="onProducerClick(hardwareType.producer.id)" class="no-wrap"><strong>{{hardwareType.producer.name}}</strong></a>
                        </td>
                        <td class="vert-align no-wrap">

                            <span *ngIf="hardwareType.processor">{{hardwareType.processor.name}}</span>

                        </td>

                        <td class="action-btn-col">

                            <bk-drob-down-button
                                [btns_group_name]="('label_type_of_board_properties'|bkTranslate:this)"
                                [btns]="[
                                {
                                    condition: true,
                                    btn_label_for_person: ('label_type_of_board_properties'|bkTranslate:this),
                                    btn_tag: 'edit_hardwareType',
                                    icon: 'fa-cog',
                                    colorType: 'EDIT',
                                    permission: (hardwareType.update_permission)
                                },
                                {
                                    condition: true,
                                    btn_label_for_person: ('label_type_of_board_remove'|bkTranslate:this),
                                    btn_tag: 'remove_hardwareType',
                                    icon: 'fa-trash',
                                    colorType: 'REMOVE',
                                    permission: (hardwareType.delete_permission)
                                }
                            ]"
                                (onValueChanged)="onDrobDownEmiter($event, hardwareType)"
                            >
                            </bk-drob-down-button>

                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- Temporary page content if content is being loaded or if there is no content -- START -->
            <bk-nothing-to-show [condition_loading]="(hardwareTypes == null)"
                                [condition_empty]="(hardwareTypes != null && hardwareTypes.length == 0)"
                                [main_message_link]="'label_no_type_of_boards'|bkTranslate:this"
                                [main_message_comment_link]="'label_no_type_of_boards_comment'|bkTranslate:this"
                                [btn_label]="'btn_create'|bkTranslate:this"
                                (onButtonClick)="onCreateHardwareTypeClick()">
            </bk-nothing-to-show>
            <!-- Temporary page content if content is being loaded or if there is no content -- END -->

        </div>


        <!-- Producers-->
        <div *ngIf="tab == 'producers'">
            <div *ngIf="(producers && producers.length)">
                <table class="table table-hover table-light   table-scrollable table-scrollable-borderless">
                    <thead>
                    <tr>
                        <th class="">{{'label_name'|bkTranslate:this}}</th>
                        <th class="">{{'label_description'|bkTranslate:this}}</th>
                        <th class="text-center">{{'table_actions'|bkTranslate:this}}</th>
                    </tr>
                    </thead>
                    <tbody class="hide-bk-drob-down-button">
                    <tr *ngFor="let producer of producers">
                        <td class="vert-align no-wrap">
                            <a (click)="onProducerClick(producer.id)" class="no-wrap"><strong>{{producer.name}}</strong></a>
                        </td>
                        <td class="vert-align no-wrap">
                            {{producer.description}}
                        </td>
                        <td class="action-btn-col">

                            <bk-drob-down-button
                                [btns_group_name]="('label_Project_Properties'|bkTranslate:this)"
                                [btns]="[
                                {
                                    condition: true,
                                    btn_label_for_person: ('label_producer_properties'|bkTranslate:this),
                                    btn_tag: 'edit_producer',
                                    icon: 'fa-cog',
                                    colorType: 'EDIT',
                                    permission: (producer.update_permission)
                                },
                                {
                                    condition: true,
                                    btn_label_for_person: ('label_producer_remove'|bkTranslate:this),
                                    btn_tag: 'remove_producer',
                                    icon: 'fa-trash',
                                    colorType: 'REMOVE',
                                    permission: (producer.delete_permission)
                                }
                            ]"
                                (onValueChanged)="onDrobDownEmiter($event, producer)"
                            >
                            </bk-drob-down-button>

                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- Temporary page content if content is being loaded or if there is no content -- START -->
            <bk-nothing-to-show [condition_loading]="(producers == null)"
                                [condition_empty]="(producers != null && producers.length == 0)"
                                [main_message_link]="'label_no_producer'|bkTranslate:this"
                                [main_message_comment_link]="'label_no_producer_comment'|bkTranslate:this"
                                [btn_label]="'btn_create'|bkTranslate:this"
                                (onButtonClick)="onCreateProducerClick()">
            </bk-nothing-to-show>
            <!-- Temporary page content if content is being loaded or if there is no content -- END -->

        </div>


        <!-- Processor -->
        <div *ngIf="tab == 'processor'">
            <div *ngIf="(processors && processors.length)">
                <table class="table table-hover table-light   table-scrollable table-scrollable-borderless" style="overflow: visible">
                    <thead>
                    <tr>
                        <th class="">{{'label_name'|bkTranslate:this}}</th>
                        <th class="">{{'label_description'|bkTranslate:this}}</th>
                        <th class="">{{'label_speed'|bkTranslate:this}}</th>
                        <th class="text-center">{{'table_actions'|bkTranslate:this}}</th>
                    </tr>
                    </thead>
                    <tbody class="hide-bk-drob-down-button" style="overflow: visible">
                    <tr *ngFor="let processor of processors">
                        <td class="vert-align no-wrap">
                            <strong>{{processor.name}}</strong>
                        </td>
                        <td class="vert-align no-wrap">
                            {{processor.processor_code}}
                        </td>
                        <td class="vert-align no-wrap">
                            {{processor.speed}}
                        </td>

                        <td class="action-btn-col">

                            <bk-drob-down-button
                                [btns_group_name]="('label_processor_properties'|bkTranslate:this)"
                                [btns]="[
                                        {
                                            condition: true,
                                            btn_label_for_person: ('label_processor_properties'|bkTranslate:this),
                                            btn_tag: 'edit_processor',
                                            icon: 'fa-cog',
                                            colorType: 'EDIT',
                                            permission: true
                                        },
                                        {
                                            condition: true,
                                            btn_label_for_person: ('label_processor_remove'|bkTranslate:this),
                                            btn_tag: 'remove_processor',
                                            icon: 'fa-trash',
                                            colorType: 'REMOVE',
                                            permission: (processor.delete_permission)
                                        }
                                    ]"
                                (onValueChanged)="onDrobDownEmiter($event, processor)"
                            >
                            </bk-drob-down-button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- Temporary page content if content is being loaded or if there is no content -- START -->
            <bk-nothing-to-show [condition_loading]="(processors == null)"
                                [condition_empty]="(processors != null && processors.length == 0)"
                                [main_message_link]="'label_no_processor'|bkTranslate:this"
                                [main_message_comment_link]="'label_no_processor_comment'|bkTranslate:this"
                                [btn_label]="'btn_create'|bkTranslate:this"
                                (onButtonClick)="onCreateProcessorClick()">
            </bk-nothing-to-show>
            <!-- Temporary page content if content is being loaded or if there is no content -- END -->

        </div>

    </div>

</bk-layout-main>
