<!--
  ~ Â© 2016 Becki Authors. See the AUTHORS file found in the top-level
  ~ directory of this distribution.
  -->

<layout-main [title]="'Notifications'">
    <div class="portlet portlet light bordered">
        <div class="portlet-title">
            <div class="becki-caption">
                <span class="font-blue-dark uppercase">
                    <i class="fa fa-fw fa-bell-o"></i>
                    Notifications
                </span>
            </div>
        </div>
        <div class="portlet-body">
            <h4>
                Displaying <b>{{notificationService.notifications.length}}</b> of total <b>{{notificationService.totalNotificationsCount}}</b> notifications
                <span *ngIf="notificationService.unreadNotificationsCount">(<b>{{notificationService.unreadNotificationsCount}}</b> unread)</span>
            </h4>
            <ul class="notification-list no-margin">
                <li *ngFor="let notification of notificationService.notifications" class="notification n-{{notification.type}}" [class.n-unread]="!notification.wasRead">
                    <i class="n-icon fa fa-{{notification.icon}}"></i>
                    <span class="n-text" *ngIf="notification.htmlBody" [innerHTML]="notification.htmlBody"></span>
                    <span class="n-text" *ngIf="notification.elementsBody"><template ngFor let-element="$implicit" [ngForOf]="notification.elementsBody"><span *ngIf="element.type == 'text'" [class.n-bold]="element.bold" [class.n-italic]="element.italic" [class.n-underline]="element.underline">{{element.text}}</span><a *ngIf="element.type == 'object'" (click)="onObjectClick(notification, element)" [class.n-bold]="element.bold" [class.n-italic]="element.italic" [class.n-underline]="element.underline">{{element.text}}</a><a *ngIf="element.type == 'link'" [href]="element.url" target="_blank" [class.n-bold]="element.bold" [class.n-italic]="element.italic" [class.n-underline]="element.underline">{{element.text}}</a></template></span>
                    <span class="n-time">{{notification.relativeTime}}</span>
                    <div class="clearfix"></div>
                </li>
                <li *ngIf="notificationService.notifications.length == 0" class="no-notifications"> No notifications </li>
            </ul>
            <div>
                <button class="btn blue-oleo btn-block notification-load-more-btn" (click)="onLoadOlderClick()" [disabled]="loading || !canLoadMore()">
                    <span *ngIf="loading">Loading...</span>
                    <span *ngIf="!loading">Load older notifications</span>
                </button>
            </div>
        </div>
    </div>
</layout-main>
