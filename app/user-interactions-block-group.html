<!--
  ~ Â© 2016 Becki Authors. See the AUTHORS file found in the top-level
  ~ directory of this distribution.
  -->

<div data-bind-layout='"Edit the \"" + group?.name + "\" blockoGroup"' data-bind-breadcrumbs="breadcrumbs" data-bind-actionLabel=" edit_permission&&!editing ? 'Edit' : null  " data-on-actionClick="onEditClick($event)" data-bind-ngSwitch="editing">

    <form class="clearfix" data-on-submit="onSubmit($event)">
        <template data-bind-ngSwitchCase="true" >
            <div class="pull-right">
                <button class="btn btn-danger" type="button" data-on-click="onCancelClick($event)">Cancel</button>
                <button class="btn btn-primary" type="submit">Edit</button>
            </div>
        </template>
        <template data-bind-ngSwitchCase="true">
            <div class="form-group">
                <label>
                    <span class="glyphicon glyphicon-pencil"></span>
                    Name
                </label>
                <input class="form-control" minlength="8" data-bindon-ngModel="nameField" data-bind-customValidator="validateNameField()" data-message="This name is used already. Please choose another one.">
            </div>
        </template>
        <div class="form-group">
            <label>
                <template data-bind-ngSwitchCase="true">
                    <span class="glyphicon glyphicon-pencil"></span>
                    Description
                </template>
            </label>
            <template data-bind-ngSwitchCase="true">
                <textarea class="form-control"  minlength="8" data-bindon-ngModel="descriptionField"></textarea>
            </template>
            <template data-bind-ngSwitchCase="false" >
                <label>Description</label>
                <p class="form-control-static">{{group?.general_description}}</p>
                <span></span>
                <label>Linked Blockos</label>
                <div data-bind-listView="blocks" data-on-addClick="onAddBlocko($event)">
                    <div class="spinner"></div>
                </div>
                <span></span>
              <template data-bind-ngIf="projects?.length > 1">
                <label>In project:</label>
                <a> <div data-on-click="onProjectClick($event)">{{project?.project_name}}</div></a>
              </template>
            </template>
        </div>
        <template data-bind-ngSwitchCase="true" >
            <div class="pull-right">
                <button class="btn btn-danger" type="button" data-on-click="onCancelClick($event)">Cancel</button>
                <button class="btn btn-primary" type="submit">Edit</button>
            </div>
        </template>

    </form>
</div>
